container:
  image: python:latest

test_task:
  pip_cache:
    folder: ~/.cache/pip
    fingerprint_script: echo $PYTHON_VERSION && cat requirements.txt
    populate_script: pip install -r requirements.txt
  test_script: python3 test.py

build_package_test_task:
  pip_cache:
    folder: ~/.cache/pip
    fingerprint_script: echo $PYTHON_VERSION
    populate_script: python3 -m pip install --upgrade setuptools wheel twine
  build_package_test_script: python3 setup.py sdist bdist_wheel bdist_egg

lint_task:
  container:
    image: alpine/flake8:latest
  script: flake8 *.py
